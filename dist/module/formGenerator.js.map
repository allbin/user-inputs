{"version":3,"sources":["../src/module/formGenerator.tsx"],"names":[],"mappings":"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","file":"formGenerator.js","sourcesContent":["import * as React from 'react';\r\nimport { LooseObject } from '.';\r\n\r\nimport { valid_types, input_imports, FormInputConfigArray, AnyInputConfigWithValue, GeneratedForm } from '.';\r\n\r\ninterface FormState {\r\n    values: {\r\n        [key: string]: any\r\n    };\r\n    inputs: FormInputConfigArray;\r\n    tag: string | null;\r\n    confirm_clicked: boolean;\r\n}\r\n\r\nexport default function getInputForm(input_configs: FormInputConfigArray, cb?: (values: any) => void): GeneratedForm {\r\n    let mounted_form: InputWrapper | null;\r\n\r\n    class InputWrapper extends React.Component<any, FormState> {\r\n        confirmCB: ((values: any) => void) | null;\r\n\r\n        constructor(props: any) {\r\n            super(props);\r\n\r\n            let values: LooseObject = {};\r\n            input_configs.forEach((input_config) => {\r\n                values[input_config.key] = input_imports[input_config.type].convertExternalToInternalValue(input_config, input_config.default_value);\r\n            });\r\n            this.state = {\r\n                values: values,\r\n                inputs: input_configs,\r\n                tag: null,\r\n                confirm_clicked: (cb) ? false : true\r\n            };\r\n            this.confirmCB = cb || null;\r\n        }\r\n\r\n        componentDidMount() {\r\n            mounted_form = this;\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            if (mounted_form === this) {\r\n                //If another instance of this form has already been mounted\r\n                //the mounted_form will have changed. Check before resetting it.\r\n                mounted_form = null;\r\n            }\r\n        }\r\n\r\n        setConfig(input_config: AnyInputConfigWithValue) {\r\n            let inputs = this.state.inputs;\r\n            let input_index = inputs.findIndex(input => input.key === input_config.key);\r\n            if (input_index < 0) {\r\n                throw new Error(\"UserInput: Key not found in existing inputs.\");\r\n            }\r\n            let values = this.state.values;\r\n            if (input_config.hasOwnProperty(\"value\")) {\r\n                values[input_config.key] = input_imports[input_config.type].convertExternalToInternalValue(input_config, input_config.default_value);\r\n            }\r\n            inputs[input_index] = Object.assign({}, inputs[input_index], input_config);\r\n            this.setState({\r\n                inputs: inputs,\r\n                values: values\r\n            });\r\n        }\r\n\r\n        getValues() {\r\n            let values: LooseObject = {};\r\n            this.state.inputs.forEach((input) => {\r\n                if (input.type === \"button\" || input.type === \"confirm\") {\r\n                    return;\r\n                } else {\r\n                    return values[input.key] = input_imports[input.type].convertInternalToExternalValue(input, this.state.values[input.key]);\r\n                }\r\n            });\r\n            return values;\r\n        }\r\n\r\n        resetValues() {\r\n            let values: LooseObject = {};\r\n            input_configs.forEach((input_config) => {\r\n                values[input_config.key] = input_imports[input_config.type].convertExternalToInternalValue(input_config, input_config.default_value);\r\n            });\r\n            this.setState({\r\n                values: values,\r\n                confirm_clicked: false\r\n            });\r\n        }\r\n\r\n        resetConfirmClick() {\r\n            this.setState({\r\n                confirm_clicked: false\r\n            });\r\n        }\r\n\r\n        userConfirmedCB() {\r\n            this.setState({ confirm_clicked: true });\r\n            if (this.confirmCB && this.isValid()) {\r\n                this.confirmCB(this.getValues());\r\n            }\r\n        }\r\n\r\n        inputValueChangeCB(key: string, value: any, cb?: () => void) {\r\n            let values = Object.assign({}, this.state.values);\r\n            values[key] = value;\r\n            this.setState({\r\n                values: values\r\n            }, cb);\r\n        }\r\n\r\n        isValid() {\r\n            return !this.state.inputs.some((input_config) => {\r\n                let valid_error = input_imports[input_config.type].validate(input_config, this.state.values[input_config.key]);\r\n                return valid_error !== null;\r\n            });\r\n        }\r\n\r\n        renderInputs() {\r\n            return this.state.inputs.map((input_request, index) => {\r\n                let InputComponent = input_imports[input_request.type].Input as typeof React.Component;\r\n                let key = input_request.key || \"input_\" + index;\r\n                if (input_request.type === \"confirm\") {\r\n                    return <InputComponent\r\n                        key={key}\r\n                        config={input_request}\r\n                        value={this.state.values[key]}\r\n                        onClick={() => { this.userConfirmedCB(); }}\r\n                    />;\r\n                } else if (input_request.type === \"button\") {\r\n                    return <InputComponent\r\n                        key={key}\r\n                        config={input_request}\r\n                        value={this.state.values[key]}\r\n                        onClick={() => {\r\n                            if (input_request.onClick) {\r\n                                input_request.onClick();\r\n                            }\r\n                        }}\r\n                    />;\r\n                }\r\n                return <InputComponent\r\n                    key={key}\r\n                    config={input_request}\r\n                    value={this.state.values[key]}\r\n                    display_error_message={this.state.confirm_clicked}\r\n                    onChange={(value: any, cb: () => void) => {\r\n                        this.inputValueChangeCB(key, value, cb);\r\n                    }}\r\n                />;\r\n            });\r\n        }\r\n\r\n        render() {\r\n            return (\r\n                <div>\r\n                    {this.renderInputs()}\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return {\r\n        component: InputWrapper,\r\n        reset: () => {\r\n            if (mounted_form) {\r\n                mounted_form.resetValues();\r\n            }\r\n        },\r\n        resetConfirmClick: () => {\r\n            if (mounted_form) {\r\n                mounted_form.resetConfirmClick();\r\n            }\r\n        },\r\n        getValues: (): LooseObject => {\r\n            if (!mounted_form) {\r\n                return {};\r\n            }\r\n            return mounted_form.getValues();\r\n        },\r\n        setInputConfig: (updated_config: AnyInputConfigWithValue) => {\r\n            if (updated_config.hasOwnProperty(\"key\") === false) {\r\n                throw new Error(\"UserInput: input_config must contain 'key' property.\");\r\n            }\r\n            let inputs = input_configs;\r\n            let input_index = input_configs.findIndex(input => input.key === updated_config.key);\r\n            if (input_index < 0) {\r\n                throw new Error(\"UserInput: Key not found in existing inputs.\");\r\n            }\r\n            input_configs[input_index] = Object.assign({}, input_configs[input_index], updated_config);\r\n            if (mounted_form) {\r\n                mounted_form.setConfig(inputs[input_index]);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nexport function validateFormGeneratorInputs(input_configs: FormInputConfigArray, confirmCB?: (value: any) => void): void {\r\n    if (input_configs.length < 1) {\r\n        throw new Error(\"UserInput: GenerateForm requires at least one input.\");\r\n    }\r\n    if (!confirmCB) {\r\n        let inputs_missing_cb = input_configs.filter(input => !input.onValueChange);\r\n        if (inputs_missing_cb.length > 0) {\r\n            throw new Error(\"UserInput: GenerateForm without a confirmCB requires every input to specify a onValueChange callback.\");\r\n        }\r\n    } else {\r\n        let confirm_buttons = input_configs.some(input => input.type === \"confirm\");\r\n        if (!confirm_buttons) {\r\n            throw new Error(\"UserInput: GenerateForm with a confirmCB is required to have at least one input of type 'confirm'.\");\r\n        }\r\n    }\r\n\r\n\r\n    //Check that default_value is set.\r\n    let invalid_inputs = input_configs.some((input) => {\r\n        return (input.type !== \"confirm\" && input.type !== \"button\") && input.hasOwnProperty(\"default_value\") === false;\r\n    });\r\n    if (invalid_inputs) {\r\n        throw new Error(\"UserInput: Every input that is not a 'button' or 'confirm' must be configured with a 'default_value'.\");\r\n    }\r\n\r\n\r\n    //Check that each input has a valid type.\r\n    invalid_inputs = input_configs.some(input => !valid_types.includes(input.type));\r\n    if (invalid_inputs) {\r\n        throw new Error(\"UserInput: Inputs must be configured with a valid 'type'. \" + valid_types.join(','));\r\n    }\r\n\r\n\r\n    //Check that each input has a key property.\r\n    invalid_inputs = input_configs.some(input => (input.type !== 'button' && input.type !== 'confirm') && !input.hasOwnProperty('key'));\r\n    if (invalid_inputs) {\r\n        throw new Error(\"UserInput: Inputs that are not type 'button' or 'confirm' must be configured with a 'key' property. \");\r\n    }\r\n\r\n\r\n    //Duplicate key check.\r\n    let duplicate_keys: Set<string> = new Set();\r\n    invalid_inputs = input_configs.some((input) => {\r\n        if (input.type === 'button' || input.type === 'confirm') {\r\n            return false;\r\n        }\r\n        return duplicate_keys.size === duplicate_keys.add(input.key).size;\r\n    });\r\n\r\n\r\n    //Run each input type's own validation function.\r\n    let errors: string[] = [];\r\n    input_configs.forEach((input) => {\r\n        let valid = input_imports[input.type].validateConfig(input);\r\n        if (valid) { errors.push(valid); }\r\n    });\r\n    if (errors.length > 0) {\r\n        throw new Error(errors.join('\\n'));\r\n    }\r\n}"]}